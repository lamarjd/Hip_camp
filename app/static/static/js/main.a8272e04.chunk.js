(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],[,,,,,,,,,,function(e,t,s){},,,,,,function(e,t,s){},,,function(e,t,s){},function(e,t,s){},,,,,,,,,,function(e,t,s){},function(e,t,s){},,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var i=s(1),c=s.n(i),n=s(11),a=s.n(n),r=s(2),l=(s(30),s(4)),o=s(5);const j="session/SET_USER",d="session/REMOVE_USER",b=e=>({type:j,payload:e}),u={user:null},p=()=>async e=>{(await fetch("/api/auth/logout",{headers:{"Content-Type":"application/json"}})).ok&&e({type:d})};s(31);var h=s(0);var O=()=>{const[e,t]=Object(i.useState)([]),[s,c]=Object(i.useState)(""),[n,a]=Object(i.useState)(""),[j,d]=Object(i.useState)(""),[u,p]=Object(i.useState)(""),[O,x]=Object(i.useState)(""),[m,v]=Object(i.useState)(""),g=Object(r.c)(e=>e.session.user),f=Object(r.b)();return console.log("User from signup",g),g?Object(h.jsx)(o.a,{to:"/"}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"signup-container",children:[Object(h.jsx)("nav",{className:"signupNavBar",children:Object(h.jsx)(l.b,{to:"/",exact:!0,activeClassName:"active",children:Object(h.jsx)("h1",{id:"go-back",children:"Go Back"})})}),Object(h.jsx)("div",{className:"outermostSignupDiv",children:Object(h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),j===u){const e=await f(((e,t,s,i,c)=>async n=>{const a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,first_name:s,last_name:i,password:c})});if(a.ok){const e=await a.json();return n(b(e)),null}if(!(a.status<500))return["An error occurred. Please try again."];{const e=await a.json();if(e.errors)return e.errors}})(s,n,O,m,j));e&&(t(e),console.log("data",e))}else t(["Passwords must match"])},id:"signupForm",children:[Object(h.jsx)("div",{children:e.map((e,t)=>Object(h.jsx)("div",{children:e},t))}),Object(h.jsxs)("div",{className:"outerSignupDiv",children:[Object(h.jsx)("label",{className:"emailSignupLabel",children:"User Name"}),Object(h.jsx)("input",{id:"userNameSignUpBox",className:"signupemailbox",type:"text",name:"username",onChange:e=>{c(e.target.value)},value:s,maxLength:60,minLength:5,required:!0}),Object(h.jsx)("label",{className:"emailSignupLabel",children:"Email"}),Object(h.jsx)("input",{id:"signInEmailBox",className:"signupemailbox",type:"text",name:"email",onChange:e=>{a(e.target.value)},value:n,minLength:5,maxLength:60,required:!0}),Object(h.jsx)("label",{className:"emailSignupLabel",children:"First Name"}),Object(h.jsx)("input",{id:"firstnamesignupbox",className:"signupemailbox",type:"text",name:"firstName",onChange:e=>{x(e.target.value)},value:O,minLength:3,maxLength:60,required:!0}),Object(h.jsx)("label",{className:"emailSignupLabel",children:"Last Name"}),Object(h.jsx)("input",{id:"signUpLastNameBox",className:"signupemailbox",type:"text",name:"lastName",onChange:e=>{v(e.target.value)},value:m,minLength:3,maxLength:60,required:!0}),Object(h.jsx)("label",{className:"emailSignupLabel",children:"Password"}),Object(h.jsx)("input",{id:"passwordSignUpIdBox",className:"signupemailbox",type:"password",name:"password",onChange:e=>{d(e.target.value)},value:j,minLength:5,maxLength:60,required:!0}),Object(h.jsx)("label",{className:"emailSignupLabel",children:"Repeat Password"}),Object(h.jsx)("input",{id:"labelRepeatPassword",className:"signupemailbox",type:"password",name:"repeat_password",onChange:e=>{p(e.target.value)},value:u,required:!0}),Object(h.jsx)("button",{id:"signupButton",type:"submit",children:"Sign Up"}),Object(h.jsx)("br",{})," ",Object(h.jsx)("i",{id:"tree",className:"fa-solid fa-tree"})]})]})})]})})};s(16);const x=c.a.createContext();function m(e){let{children:t}=e;const s=Object(i.useRef)(),[c,n]=Object(i.useState)();return Object(i.useEffect)(()=>{n(s.current)},[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(x.Provider,{value:c,children:t}),Object(h.jsx)("div",{ref:s})]})}function v(e){let{onClose:t,children:s}=e;const c=Object(i.useContext)(x);return c?a.a.createPortal(Object(h.jsxs)("div",{id:"modal",children:[Object(h.jsx)("div",{children:"show modal"}),Object(h.jsx)("div",{id:"modal-background",onClick:t}),Object(h.jsx)("div",{id:"modal-content",children:s})]}),c):null}s(10);var g=()=>{const[e,t]=Object(i.useState)(""),[s,c]=Object(i.useState)(""),[n,a]=Object(i.useState)([]),l=Object(r.c)(e=>e.session.user),j=Object(r.b)();return l?Object(h.jsx)(o.a,{to:"/"}):Object(h.jsxs)("form",{className:"form",onSubmit:async t=>{t.preventDefault();const i=await j(((e,t)=>async s=>{const i=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(i.ok){const e=await i.json();return s(b(e)),null}if(!(i.status<500))return["An error occurred. Please try again."];{const e=await i.json();if(e.errors)return e.errors}})(e,s));i&&a(i)},children:[Object(h.jsx)("div",{className:"errors",children:n.map((e,t)=>Object(h.jsx)("div",{children:e},t))}),Object(h.jsxs)("div",{className:"login-fields",children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email"}),Object(h.jsx)("input",{name:"email",type:"text",placeholder:"Email",value:e,onChange:e=>{t(e.target.value)},required:!0})]}),Object(h.jsxs)("div",{className:"login-fields",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:s,required:!0,onChange:e=>{c(e.target.value)}}),Object(h.jsx)("input",{type:"submit",className:"sign-in",value:"Log In"})," ",Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"demo-container",children:Object(h.jsx)("button",{className:"demo",onClick:()=>{t("demo@aa.io"),c("password")},children:"Demo User"})})]})]})};var f=function(){const[e,t]=Object(i.useState)(!1);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{className:"sign-in",onClick:()=>t(!0),children:"Log In"}),e&&Object(h.jsx)(v,{onClose:()=>t(!1),children:Object(h.jsx)(g,{})})]})};s(39);var w=()=>{const e=Object(o.g)(),t=Object(r.b)();return Object(h.jsx)("button",{id:"logout",onClick:async s=>{await t(p()),e.push("/")},children:"Logout"})};s(19);var y=function(e){let{sessionUser:t}=e;const[s,c]=Object(i.useState)(!1);return Object(i.useEffect)(()=>{if(!s)return;const e=()=>{c(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[s]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"user_button",children:Object(h.jsx)("i",{id:"menu",className:"fas fa-user-circle",onClick:()=>{s||c(!0)}})}),s&&Object(h.jsxs)("div",{className:"profile-dropdown",children:[Object(h.jsx)("p",{id:"user-info",children:t.username}),Object(h.jsx)("p",{id:"user-info",children:t.email}),Object(h.jsx)("p",{id:"user-spots",style:{textDecoration:"none"},children:Object(h.jsx)(l.b,{to:`/${null===t||void 0===t?void 0:t.id}/spots`,children:"My Spots"})}),Object(h.jsx)("p",{children:Object(h.jsx)(w,{})})]})]})};var S=()=>{const e=Object(r.c)(e=>e.session.user);let t;return t=e?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(f,{})}),Object(h.jsx)("nav",{className:"nav",children:Object(h.jsx)("div",{className:"navbar",children:Object(h.jsxs)("ul",{className:"nav-list-items",children:[Object(h.jsx)("li",{children:Object(h.jsxs)(l.b,{className:"logo",to:"/",exact:!0,activeClassName:"active",children:["HI-C",Object(h.jsx)("i",{className:"fa-solid fa-campground"}),"MP"]})}),Object(h.jsx)("li",{children:t}),!e&&Object(h.jsx)("li",{children:Object(h.jsx)(l.b,{className:"signup",to:"/sign-up",exact:!0,activeClassName:"active",children:"Sign Up"})}),e&&Object(h.jsx)("li",{id:"logout",children:Object(h.jsx)(y,{sessionUser:e})})]})})})};var N=e=>{const t=Object(r.c)(e=>e.session.user);return Object(h.jsx)(o.b,{...e,children:t?e.children:Object(h.jsx)(o.a,{to:"/login"})})};var C=function(){const[e,t]=Object(i.useState)([]);Object(i.useEffect)(()=>{!async function(){const e=await fetch("/api/users/"),s=await e.json();t(s.users)}()},[]);const s=e.map(e=>Object(h.jsx)("li",{children:Object(h.jsx)(l.b,{to:`/users/${e.id}`,children:e.username})},e.id));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"User List: "}),Object(h.jsx)("ul",{children:s})]})};var E=function(){const[e,t]=Object(i.useState)({}),{userId:s}=Object(o.h)();return Object(i.useEffect)(()=>{s&&(async()=>{const e=await fetch(`/api/users/${s}`),i=await e.json();t(i)})()},[s]),e?Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"User Id"})," ",s]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Username"})," ",e.username]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Email"})," ",e.email]})]}):null};const k="spots/all",L="spots/one",I="spots/new",U="spots/edit",T="spots/delete",R=e=>({type:I,payload:e}),D=e=>({type:U,spot:e}),F=()=>async e=>{const t=await fetch("/api/spots");if(t.ok){const s=await t.json();return e({type:k,payload:s}),s}throw new Error("Not this time")},q=e=>async t=>{const s=await fetch(`/api/spots/${e}`);if(s.ok){const e=await s.json();return t({type:L,payload:e}),e}},P=e=>async t=>{if(!(await fetch(`/api/spots/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Not this time");t((e=>({type:T,spotId:e}))(`${e}`))},$={};var M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,s={};switch(t.type){case k:return t.payload.spots.forEach(e=>{s[e.id]=e}),s;case L:case I:return s={...e},s[t.payload.id]=t.payload,s;case U:return s={...e},console.log("New State",s),console.log("New State Action",t),s[t.spot.id]=t.spot,console.log("New State Action Before",s),s[t.spot.id].reviews=e[t.spot.id].reviews,console.log("New State Action After",s),s;case T:return s={...e},delete s[t.spotId],s;default:return e}};var A=function(e){let{showModal:t,setShowModal:s}=e;const c=Object(r.b)(),n=Object(o.g)(),[a,l]=Object(i.useState)(""),[j,d]=Object(i.useState)(""),[b,u]=Object(i.useState)("Campsite"),[p,O]=Object(i.useState)(""),[x,m]=Object(i.useState)(""),[v,g]=Object(i.useState)(""),[f,w]=Object(i.useState)(0),[y,S]=Object(i.useState)("");return Object(h.jsx)("div",{className:"create-spot-container",children:Object(h.jsxs)("form",{className:"spot-form",onSubmit:async e=>{e.preventDefault();const t={name:j,imageUrl:a,type:b,city:p,state:x,country:v,price:f,description:y};let i=await c((e=>async t=>{const s=await fetch("/api/spots/new_spot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await s.json();if(s.ok)return await t(R(i)),i;throw new Error("Not this time")})(t));i&&(l(""),d(""),u("Campsite"),O(""),m(""),g(""),w(0),S(""),s(!1),n.push("/spots"))},children:[Object(h.jsxs)("ul",{id:"lists",children:[Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Spot Type:",Object(h.jsxs)("select",{onChange:e=>{u(e.target.value)},children:[Object(h.jsx)("option",{value:"Campsite",children:"Campsite"}),Object(h.jsx)("option",{value:"Lodging",children:"Lodging"})]})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Upload Image:",Object(h.jsx)("input",{className:"spot-form-image-field",placeholder:"Spot Image URL (.jpg or .png format)",type:"text",maxLength:250,value:a,required:!0,onChange:e=>{l(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:["Spot Name:",Object(h.jsx)("input",{className:"spot-form-name-field",placeholder:"Spot Name",type:"text",maxLength:60,minLength:5,value:j,required:!0,onChange:e=>{d(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" Spot City:",Object(h.jsx)("input",{className:"spot-form-city-field",placeholder:"Spot City (optional)",type:"text",maxLength:60,minLength:5,value:p,onChange:e=>{O(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" Spot State:",Object(h.jsx)("input",{className:"spot-form-state-field",placeholder:"Spot State",type:"text",maxLength:50,value:x,required:!0,onChange:e=>{m(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" Spot Country:",Object(h.jsx)("input",{className:"spot-form-country-field",placeholder:"Spot Country",type:"text",maxLength:50,minLength:3,value:v,required:!0,onChange:e=>{g(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" Spot Price:",Object(h.jsx)("input",{className:"spot-form-price-field",placeholder:"Spot price",value:f,required:!0,pattern:"[0-9]+",onChange:e=>{w(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" Spot Description:",Object(h.jsx)("input",{className:"spot-form-description-field",placeholder:"Add a Description for your spot",type:"text",maxLength:2e3,minLength:20,value:y,required:!0,onChange:e=>{S(e.target.value)}})]})})]}),Object(h.jsxs)("div",{className:"add-spot-buttons",children:[Object(h.jsx)("button",{id:"submit",type:"submit",children:"Submit"}),Object(h.jsx)("button",{id:"submit",type:"cancel",onClick:()=>s(!1),children:"Cancel"})]})]})})};var _=function(){const[e,t]=Object(i.useState)(!1);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{className:"sign-in",onClick:()=>t(!0),children:"Host a Spot"}),e&&Object(h.jsx)(v,{onClose:()=>t(!1),children:Object(h.jsx)(A,{showModal:e,setShowModal:t})})]})};const B="reviews/one",J="reviews/all",H="reviews/new",G="reviews/edit",V="reviews/delete",W=()=>async e=>{const t=await fetch("/api/reviews");if(t.ok){const s=await t.json();return e({type:J,payload:s}),s}throw new Error("Cannot get all reviews")},K=(e,t)=>async s=>{const i=await fetch(`/api/reviews/${t}/new_review`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(i.ok){const e=await i.json();return await s((e=>({type:H,payload:e}))(e)),e}throw new Error("Cannot create a review")},z=(e,t)=>async s=>{const i=await fetch(`/api/reviews/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(i.ok){const e=await i.json();return s((e=>({type:G,review:e}))(e)),e}throw new Error("Cannot edit this review")},Q=e=>async t=>{console.log("review ID from Thunk",e);const s=await fetch(`/api/reviews/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(console.log("response from delete review thunk",s),s.ok){const s=`${e}`;console.log("review from backend",s),t((e=>({type:V,reviewId:e}))(s))}},X={};var Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,s={};switch(t.type){case B:return s={...e},s[t.payload.id]=t.payload,s;case J:return t.payload.reviews.forEach(e=>{s[e.id]=e}),s;case H:return s={...e},s[t.payload.id]=t.payload,s;case G:return{...e,[t.review.id]:t.review};case V:return s={...e},console.log("Delete reducer before",s),delete s[t.reviewId],console.log("Delete ACTION reducer AFTER",t),console.log("Delete reducer AFTER",s),s;default:return e}},Z=s.p+"static/media/wake-up.7ca8c89b.png";s(20);var ee=function(){const e=Object(r.b)();Object(i.useEffect)(()=>{e(F()),e(W())},[e]);const t=Object(r.c)(e=>Object.values(e.reviews));console.log("rev",t);const s=(e,t)=>{let s=0,i=0;return e.forEach(e=>{e.spot_id===t&&(s+=e.rating,i++)}),s/5/i},c=(e,t)=>{let s=0;return e.forEach(e=>{e.spot_id===t&&s++}),s},n=Object(r.c)(e=>Object.values(e.spots)),a=Object(r.c)(e=>e.session.user);return Object(h.jsxs)("div",{className:"all-spots-container",children:[Object(h.jsx)("div",{className:"options-container",children:Object(h.jsx)("span",{className:"single-option",children:Object(h.jsx)("h3",{children:a&&Object(h.jsx)(_,{})})})}),Object(h.jsx)("div",{className:"spot-list",children:null===n||void 0===n?void 0:n.map(e=>{return Object(h.jsxs)("div",{className:"single-spots-container",children:[Object(h.jsx)(l.b,{to:`/spots/${null===e||void 0===e?void 0:e.id}`,children:Object(h.jsx)("div",{className:"all-spot-img",children:Object(h.jsx)("img",{id:"spot-pic",alt:"spot-pic",src:null===e||void 0===e?void 0:e.imageUrl,onError:e=>{e.target.src=`${Z}`}})})},null===e||void 0===e?void 0:e.id),Object(h.jsxs)("div",{className:"info",children:[c(t,e.id)>0?Object(h.jsxs)("p",{id:"spot-rev",style:{color:"green"},children:[Object(h.jsx)("i",{id:"thumb-up",className:"fa-solid fa-thumbs-up"})," ",(i=s(t,e.id),i?100*i+"%":"No reviews")," (",c(t,e.id),")"]}):Object(h.jsx)("p",{id:"spot-rev",children:"No reviews (0)"}),Object(h.jsx)("h1",{id:"spot-name",children:null===e||void 0===e?void 0:e.name}),Object(h.jsx)("p",{id:"spot-rev",children:e.type}),e.city?Object(h.jsxs)("p",{id:"spot-rev",children:[e.city,", "]}):null,Object(h.jsxs)("p",{id:"spot-rev",children:[e.state," "]}),Object(h.jsxs)("p",{id:"spot-rev",children:["from $",e.price," /night "]})]})]},e.id);var i})})]})};var te=function(e){let{filteredReviews:t,oneSpot:s,setShowModal:c}=e;console.log("oneSpot from ReviewForm",s);const n=Object(r.b)(),a=Object(o.g)(),{id:l}=s,[j,d]=Object(i.useState)(""),[b,u]=Object(i.useState)(1),[p,O]=Object(i.useState)([]);return Object(i.useEffect)(()=>{n(q(l))},[n,j,b,l]),Object(i.useEffect)(()=>{const e=[];j.length<20&&e.push("Review body must be longer than 20 characters"),j.length>200&&e.push("Review body must be less than 200 characters"),O(e)},[j]),Object(h.jsx)("form",{className:"add-review-form",onSubmit:async e=>{e.preventDefault();const t={body:j,rating:b};d(""),u(1),c(!1),await n(K(t,l))&&a.push(`/spots/${l}`)},children:Object(h.jsxs)("div",{className:"review-inputs",children:[Object(h.jsx)("ul",{children:p&&p.map(e=>Object(h.jsx)("li",{className:"errors",children:e},e))}),Object(h.jsxs)("h2",{children:["Write a review for ",s.name]})," ",Object(h.jsx)("hr",{}),Object(h.jsx)("div",{className:"add-review-inputs",children:Object(h.jsxs)("label",{children:[" ","Select Rating "," ",Object(h.jsxs)("select",{onChange:e=>u(e.target.value),children:[Object(h.jsx)("option",{value:1,children:"1 Star"}),Object(h.jsx)("option",{value:2,children:"2 Star"}),Object(h.jsx)("option",{value:3,children:"3 Star"}),Object(h.jsx)("option",{value:4,children:"4 Star"}),Object(h.jsx)("option",{value:5,children:"5 Star"})]})]})}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"add-review-inputs",children:[Object(h.jsxs)("label",{children:[" ","Write Review "," ",Object(h.jsx)("input",{id:"review-body-input",placeholder:"Add your review here",value:j,maxLength:200,minLength:20,required:!0,onChange:e=>d(e.target.value)}),j.length,"/200"]}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("div",{className:"review-buttons",children:[Object(h.jsx)("button",{id:"submit",type:"submit",children:"Add Review"}),Object(h.jsx)("button",{id:"submit",type:"cancel",onClick:()=>c(!1),children:"Cancel"})]})]})})};var se=function(e){let{oneSpot:t,spotId:s}=e;const[c,n]=Object(i.useState)(!1);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{className:"review-modal",onClick:()=>n(!0),children:"Add Review"}),c&&Object(h.jsx)(v,{onClose:()=>n(!1),children:Object(h.jsx)(te,{oneSpot:t,spotId:s,showModal:c,setShowModal:n})})]})};s(40);var ie=function(e){let{review:t,spotId:s,oneSpot:c,setShowModal:n}=e;const a=Object(r.b)(),l=Object(o.g)(),[j,d]=Object(i.useState)(null===t||void 0===t?void 0:t.body),[b,u]=Object(i.useState)(null===t||void 0===t?void 0:t.rating);return Object(h.jsx)("form",{className:"edit-review-form",onSubmit:async e=>{e.preventDefault();const i={rating:b,body:j};await a(z(i,t.id))&&(n(!1),l.push(`/spots/${s}`))},children:Object(h.jsx)("div",{className:"edit-review-inner-container",children:Object(h.jsxs)("ul",{id:"review-list",children:[Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Select Rating "," ",Object(h.jsxs)("select",{onChange:e=>{u(e.target.value)},children:[Object(h.jsx)("option",{value:1,children:"1 Star"}),Object(h.jsx)("option",{value:2,children:"2 Star"}),Object(h.jsx)("option",{value:3,children:"3 Star"}),Object(h.jsx)("option",{value:4,children:"4 Star"}),Object(h.jsx)("option",{value:5,children:"5 Star"})]})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit Review:",Object(h.jsx)("input",{id:"input-name",type:"text",value:j,maxLength:200,minLength:20,required:!0,onChange:e=>{d(e.target.value)}}),j.length," / 200"]})}),Object(h.jsxs)("span",{id:"edit-review-buttons",children:[Object(h.jsx)("button",{id:"submit",type:"submit",children:"Submit Edit"}),Object(h.jsx)("button",{id:"submit",type:"cancel",onClick:()=>n(!1),children:"Cancel"})]})]})})})};var ce=function(e){let{review:t,oneSpot:s,spotId:c}=e;const[n,a]=Object(i.useState)(!1);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{className:"edit-review",onClick:()=>a(!0),children:"Edit Review"}),n&&Object(h.jsx)(v,{onClose:()=>a(!1),children:Object(h.jsx)(ie,{review:t,spotId:c,oneSpot:s,showModal:n,setShowModal:a})})]})};var ne=function(){const e=Object(r.b)(),{spotId:t}=Object(o.h)(),s=Object(r.c)(e=>e.session.user),c=Object(r.c)(e=>Object.values(e.reviews)).filter(e=>e.spot_id===+t),n=Object(r.c)(e=>Object.values(e.spots)).filter(e=>e.id===+t)[0];Object(i.useEffect)(()=>{e(q(t)),e(W())},[e,t]);const a=c.map(e=>e.rating),j=a.reduce((e,t)=>e+t,0);return n?Object(h.jsxs)("div",{className:"spot-container",children:[Object(h.jsx)(l.b,{to:"/spots",exact:!0,activeClassName:"active",children:Object(h.jsx)("h2",{id:"back",children:"Back To All Spots"})}),Object(h.jsxs)("div",{className:"spot-detail-div",children:[Object(h.jsxs)("div",{className:"spot-details",children:[Object(h.jsxs)("p",{children:[null===n||void 0===n?void 0:n.country," "]})," ",Object(h.jsx)("h6",{children:" > "}),null!==n&&void 0!==n&&n.city?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:null===n||void 0===n?void 0:n.city}),Object(h.jsx)("h6",{children:" > "})]}):Object(h.jsx)("p",{children:""}),Object(h.jsxs)("p",{children:[null===n||void 0===n?void 0:n.state," "]})]}),Object(h.jsxs)("div",{className:"spot-name",children:[Object(h.jsx)("h2",{children:null===n||void 0===n?void 0:n.name}),Object(h.jsx)("div",{className:"total-spot-reviews",children:a.length?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("i",{id:"thumb-up",className:"fa-solid fa-thumbs-up"}),Object(h.jsxs)("p",{id:"thumb-up",children:[j/5/a.length*100,"%"]}),Object(h.jsxs)("p",{id:"underline",children:["(",c.length,") reviews"]})]}):Object(h.jsx)("p",{children:"No Reviews"})})]})]}),Object(h.jsx)("div",{className:"img-container",children:Object(h.jsx)("img",{id:"spot-img",alt:"spot-img",src:null===n||void 0===n?void 0:n.imageUrl,onError:e=>{e.target.src=`${Z}`}})}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"spot-specifics",children:[Object(h.jsx)("h3",{children:"Price:"}),Object(h.jsxs)("h4",{id:"specifics",children:["$",null===n||void 0===n?void 0:n.price," "]}),Object(h.jsx)("h3",{children:"Type:"}),Object(h.jsxs)("h4",{id:"specifics",children:[null===n||void 0===n?void 0:n.type," "]}),Object(h.jsx)("h3",{children:"Description:"}),Object(h.jsxs)("h4",{id:"specifics",children:[null===n||void 0===n?void 0:n.description," "]}),Object(h.jsx)("br",{})]}),0===(null===c||void 0===c?void 0:c.length)?Object(h.jsx)("h3",{children:"No Reviews"}):Object(h.jsx)("div",{className:"total-reviews",children:Object(h.jsxs)("h3",{children:[" Reviews (",c.length,")"]})}),Object(h.jsx)("div",{className:"reviews",children:null===c||void 0===c?void 0:c.map(i=>Object(h.jsxs)("span",{id:"review-items",children:[Object(h.jsxs)("p",{id:"review-labels",children:["Review: ",null===i||void 0===i?void 0:i.body]},null===i||void 0===i?void 0:i.body),Object(h.jsxs)("p",{id:"review-labels",children:["Rating: ",null===i||void 0===i?void 0:i.rating," / 5 stars"]},null===i||void 0===i?void 0:i.rating),(null===i||void 0===i?void 0:i.user_id)===(null===s||void 0===s?void 0:s.id)&&Object(h.jsxs)("div",{className:"review-action-buttons",children:[Object(h.jsx)(ce,{review:i,oneSpot:n,spotId:t}),Object(h.jsx)("button",{id:"delete-review",onClick:()=>e(Q(i.id)),children:"Delete"})]})]}))}),(null===n||void 0===n?void 0:n.user_id)!==(null===s||void 0===s?void 0:s.id)&&Object(h.jsx)(se,{filteredReviews:c,oneSpot:n,spotId:t}),Object(h.jsx)("br",{})]}):Object(h.jsx)(o.a,{to:"/not-found"})},ae=s.p+"static/media/tent-and-view.a8073431.png",re=s.p+"static/media/tent-view.2eb92704.png",le=s.p+"static/media/wakeUp4.37d3b7dd.png",oe=s.p+"static/media/wakeUp5.2bca76d4.png",je=s.p+"static/media/wakeUp6.4d658f23.png",de=s.p+"static/media/wakeUp7.ebf05835.png",be=s.p+"static/media/wakeUp8.4a5aa9ad.png";s(41);function ue(){const e={src1:ae,src2:re,src4:le,src5:oe,src6:je,src7:de,src8:be};return Object(i.useEffect)(()=>{},[]),Object(h.jsxs)("div",{className:"splash-container",children:[Object(h.jsxs)("div",{className:"splash-words",children:[Object(h.jsx)("h1",{id:"find",children:"Find yourself outside."}),Object(h.jsx)("div",{className:"wrap",children:Object(h.jsxs)("h2",{id:"wrap",children:["Discover and book tent camping, RV ",Object(h.jsx)("br",{}),"parks, cabins, treehouses, and glamping."]})})]}),Object(h.jsxs)("div",{className:"search",children:[Object(h.jsx)(l.b,{to:"/spots",exact:!0,children:"Explore All Spots"}),Object(h.jsx)("br",{})]}),Object(h.jsx)("div",{className:"splash-img-container",children:Object(h.jsx)("img",{id:"wake-up",alt:"wake-up",src:function(){let t=Object.values(e);return t[Math.floor(Math.random()*t.length)]}()})})]})}var pe=s.p+"static/media/404-2.ed59cf5a.png";s(42);function he(){return Object(h.jsx)("div",{className:"not-found-container",children:Object(h.jsx)("img",{id:"not-found",alt:"Error",src:pe})})}s(43);function Oe(){return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"about-me",children:[Object(h.jsx)("i",{id:"links",onClick:e=>window.location="https://github.com/lamarjd/Hip_camp",className:"fa-brands fa-github"}),Object(h.jsx)("i",{id:"links",onClick:e=>window.location="https://www.linkedin.com/in/jacob-lamar-73449040/",class:"fa-brands fa-linkedin"})]})})}var xe=function(e){let{spotId:t,oneSpot:s,setShowModal:c}=e;const n=Object(r.b)(),a=Object(o.g)(),[l,j]=Object(i.useState)(""),[d,b]=Object(i.useState)(""),[u,p]=Object(i.useState)(""),[O,x]=Object(i.useState)(""),[m,v]=Object(i.useState)(""),[g,f]=Object(i.useState)(""),[w,y]=Object(i.useState)(0),[S,N]=Object(i.useState)("");Object(i.useEffect)(()=>{b(s&&s.imageUrl),j(s&&s.name),p(s&&s.type),v(s&&s.state),f(s&&s.country),y(s&&s.price),N(s&&s.description)},[s]),Object(i.useEffect)(()=>{n(q(t))},[n,t]);let C=e=>{b(e.target.value)};const[E,k]=Object(i.useState)([]);return Object(i.useEffect)(()=>{const e=[];C||e.push("Spot must include an image"),d.includes(".jpg")||e.push("Spot Image must be in the proper format (.jpg or .png)"),l||e.push("Spot must have a name"),m||e.push("Spot must have a State"),g||e.push("Spot must have a Country"),w||e.push("Spot must have a Price"),S||e.push("Spot must have a Description"),(S.length<20||S.length>2e3)&&e.push("Description must be between 20 and 2000 characters"),k(e)},[d,l,m,g,w,S]),Object(h.jsxs)("form",{className:"edit-spot-form",onSubmit:async e=>{e.preventDefault();const s={name:l,imageUrl:d,type:u,city:O,state:m,country:g,price:w,description:S};let i=await n((r=s,o=t,async e=>{console.log("THUNK FIRING",r,o);const t=await fetch(`/api/spots/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(t.ok){const s=await t.json();return console.log("Spot from Edit Thunk",s),e(D(s)),s}throw new Error("Not this time")}));var r,o;console.log("Edited Spot",i),i&&(c(!1),a.push(`/spots/${i.id}`))},children:[Object(h.jsx)("ul",{children:E&&E.map(e=>Object(h.jsx)("li",{className:"errors",children:e},e))}),Object(h.jsx)("div",{className:"edit-spot-inner-container",children:Object(h.jsxs)("ul",{id:"lists",children:[Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit Spot Type",Object(h.jsxs)("select",{onChange:e=>{p(e.target.value)},children:[Object(h.jsx)("option",{value:"Campsite",children:"Campsite"}),Object(h.jsx)("option",{value:"Lodging",children:"Lodging"})]})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit Image:",Object(h.jsx)("input",{id:"input-image",type:"text",value:d,maxLength:250,required:!0,onChange:C})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit Name:",Object(h.jsx)("input",{id:"input-name",type:"text",value:l,maxLength:60,minLength:5,required:!0,onChange:e=>{j(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit City:",Object(h.jsx)("input",{id:"input-city",type:"text",placeholder:"City (optional)",value:O,maxLength:60,minLength:5,onChange:e=>{x(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit State:",Object(h.jsx)("input",{id:"input-state",type:"text",value:m,maxLength:50,required:!0,onChange:e=>{v(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit Country",Object(h.jsx)("input",{id:"input-country",type:"text",value:g,maxLength:50,minLength:3,required:!0,onChange:e=>{f(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit Price:",Object(h.jsx)("input",{id:"input-price",type:"text",value:w,required:!0,onChange:e=>{y(e.target.value)}})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[" ","Edit Description:",Object(h.jsx)("input",{id:"input-description",type:"text",maxLength:2e3,minLength:20,value:S,required:!0,onChange:e=>{N(e.target.value)}})]})}),Object(h.jsxs)("div",{className:"edit-spot-buttons",children:[Object(h.jsx)("button",{id:"submit",type:"submit",children:"Submit Edit"}),Object(h.jsx)("button",{id:"submit",type:"cancel",onClick:()=>c(!1),children:"Cancel"})]})]})})]})};var me=function(e){let{oneSpot:t,spotId:s}=e;const[c,n]=Object(i.useState)(!1);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{className:"sign-in",onClick:()=>n(!0),children:"Edit Spot"}),c&&Object(h.jsx)(v,{onClose:()=>n(!1),children:Object(h.jsx)(xe,{spotId:s,oneSpot:t,showModal:c,setShowModal:n})})]})};var ve=function(){const e=Object(r.b)(),t=Object(r.c)(e=>e.session.user),s=Object(r.c)(e=>Object.values(e.spots));console.log("SPOTS",s);const c=s.filter(e=>e.user_id===t.id);return console.log("User spots",c),Object(i.useEffect)(()=>{e(F())},[e]),Object(h.jsxs)("div",{children:["User Spots",Object(h.jsx)("div",{className:"user-spot-list",children:c.length?null===c||void 0===c?void 0:c.map(s=>Object(h.jsxs)("div",{className:"user-spots-container",children:[Object(h.jsx)(l.b,{to:`/spots/${null===s||void 0===s?void 0:s.id}`,children:Object(h.jsxs)("div",{className:"all-spot-img",children:[Object(h.jsx)("img",{id:"spot-pic",alt:"spot-pic",src:null===s||void 0===s?void 0:s.imageUrl,onError:e=>{e.target.src=`${Z}`}}),Object(h.jsx)("h1",{id:"name",children:null===s||void 0===s?void 0:s.name})]})},null===s||void 0===s?void 0:s.id),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"delete-spot",children:(null===t||void 0===t?void 0:t.id)===s.user_id&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(me,{oneSpot:s,spotId:s.id}),Object(h.jsx)("button",{onClick:()=>e(P(s.id)),children:"Delete"})]})})]},s.id)):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{children:"No Spots"})})})]})};var ge=function(){const[e,t]=Object(i.useState)(!1),s=Object(r.b)();return Object(i.useEffect)(()=>{(async()=>{await s(async e=>{const t=await fetch("/api/auth/",{headers:{"Content-Type":"application/json"}});if(t.ok){const s=await t.json();if(s.errors)return;e(b(s))}}),t(!0)})()},[s]),e?Object(h.jsxs)(l.a,{children:[Object(h.jsx)(S,{}),Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{path:"/sign-up",exact:!0,children:Object(h.jsx)(O,{})}),Object(h.jsx)(N,{path:"/users",exact:!0,children:Object(h.jsx)(C,{})}),Object(h.jsx)(N,{path:"/users/:userId",exact:!0,children:Object(h.jsx)(E,{})}),Object(h.jsx)(o.b,{path:"/spots/:spotId",children:Object(h.jsx)(ne,{})}),Object(h.jsx)(N,{exact:!0,path:"/:userId/spots",children:Object(h.jsx)(ve,{})}),Object(h.jsx)(o.b,{exact:!0,path:"/spots",children:Object(h.jsx)(ee,{})}),Object(h.jsx)(o.b,{path:"/",exact:!0,children:Object(h.jsx)(ue,{})}),Object(h.jsx)(he,{})]}),Object(h.jsx)(Oe,{})]}):null},fe=s(14),we=s(22);const ye=Object(fe.b)({session:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return{user:t.payload};case d:return{user:null};default:return e}},spots:M,reviews:Y});let Se;Se=Object(fe.a)(we.a);const Ne=(e=>Object(fe.c)(ye,e,Se))();a.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(r.a,{store:Ne,children:Object(h.jsx)(m,{children:Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(ge,{})})})})}),document.getElementById("root"))}],[[44,1,2]]]);
//# sourceMappingURL=main.a8272e04.chunk.js.map